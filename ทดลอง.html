<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
    import { getFirestore, collection, addDoc, getDocs, deleteDoc, doc } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js";
  
    // üîπ ‡πÉ‡∏™‡πà Firebase Config ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏à‡∏≤‡∏Å Firebase Console
   const firebaseConfig = {
    apiKey: "AIzaSyDPNcrB-EKgJo6942fc5TFigtCZsGFOwTY",
    authDomain: "lay1-56dde.firebaseapp.com",
    databaseURL: "https://lay1-56dde-default-rtdb.firebaseio.com",
    projectId: "lay1-56dde",
    storageBucket: "lay1-56dde.firebasestorage.app",
    messagingSenderId: "97065714920",
    appId: "1:97065714920:web:28a1c69ed5543d80c8f55d",
    measurementId: "G-LTDEG1LRVM"
  };
  
    // üîπ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
  
    // üìå ‡πÇ‡∏´‡∏•‡∏î‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏à‡∏≤‡∏Å Firestore
    async function loadActivities() {
      const querySnapshot = await getDocs(collection(db, "activities"));
      const tableBody = document.getElementById("activities-table");
      tableBody.innerHTML = "";
  
      querySnapshot.forEach((doc) => {
        const activity = doc.data();
        const row = `
          <tr>
            <td>${activity.title}</td>
            <td>${getCategoryName(activity.category)}</td>
            <td>${activity.location}</td>
            <td class="action-buttons">
              <button class="btn btn-sm btn-danger" onclick="deleteActivity('${doc.id}')">‡∏•‡∏ö</button>
            </td>
          </tr>
        `;
        tableBody.innerHTML += row;
      });
    }
  
    // üìå ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏ô Firestore
    async function saveActivity() {
      const form = document.getElementById("addActivityForm");
      const formData = new FormData(form);
      
      const newActivity = {
        title: formData.get("title"),
        category: formData.get("category"),
        location: formData.get("location"),
        description: formData.get("description")
      };
  
      await addDoc(collection(db, "activities"), newActivity);
      alert("‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢!");
      loadActivities();
      const modal = bootstrap.Modal.getInstance(document.getElementById("addActivityModal"));
      modal.hide();
      form.reset();
    }
  
    // üìå ‡∏•‡∏ö‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏à‡∏≤‡∏Å Firestore
    async function deleteActivity(id) {
      if (confirm("‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?")) {
        await deleteDoc(doc(db, "activities", id));
        alert("‡∏•‡∏ö‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!");
        loadActivities();
      }
    }
  
    // üìå ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏™‡∏£‡πá‡∏à
    document.addEventListener("DOMContentLoaded", loadActivities);
  
    // üìå ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏à‡∏≤‡∏Å HTML
    window.saveActivity = saveActivity;
    window.deleteActivity = deleteActivity;
  
  </script>
  